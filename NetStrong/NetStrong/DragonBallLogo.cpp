// DragonBallLogo.cpp : 实现文件
//

#include "stdafx.h"
#include "NetStrong.h"
#include "DragonBallLogo.h"

char logo_lv1[] = ""
"                       \n"
"                       \n"
"                       \n"
"                       \n"
"                       \n"
"                       \n"
"                       \n"
"                       \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";
char logo_lv11231[] = ""
"                       \n"
"                       \n"
"           *           \n"
"        *  *  *        \n"
"       * * * * *       \n"
"        *  *  *        \n"
"           *           \n"
"                       \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";

char logo_lv2[] = ""
"                       \n"
"                       \n"
"                       \n"
"           *           \n"
"         * * *         \n"
"           *           \n"
"                       \n"
"                       \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";

char logo_lv3[] = ""
"                       \n"
"                       \n"
"           *           \n"
"        *  *  *        \n"
"       * * * * *       \n"
"        *  *  *        \n"
"           *           \n"
"                       \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";
char logo_lv4[] = ""
"                       \n"
"                       \n"
"         * * *         \n"
"      * *. * .* *      \n"
"     * * * * * * *     \n"
"      * *. * .* *      \n"
"         * * *         \n"
"                       \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";

char logo_lv41[] = ""
"                       \n"
"                       \n"
"        .* * *.        \n"
"      * *.***.* *      \n"
"     * ********* *     \n"
"      * *.***.* *      \n"
"        .* * *.        \n"
"                       \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";

char logo_lv5[] = ""
"                       \n"
"                       \n"
"         * * *         \n"
"      * ******* *      \n"
"     * ********* *     \n"
"      * ******* *      \n"
"         * * *         \n"
"                       \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";

char logo_lv6[] = ""
"          * *          \n"
"       *       *       \n"
"    *    * * *    *    \n"
"   *  * ******* *  *   \n"
"  *  * ********* *  *  \n"
"   *  * ******* *  *   \n"
"    *    * * *    *    \n"
"        *      *     \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";

char logo1[] = ""
"                       \n"
"                       \n"
"        *******        \n"
"      ***********      \n"
"     *************     \n"
"      ***********      \n"
"        *******        \n"
"                       \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";
char logo2[] = ""
"      .          .     \n"
"   .  .              . \n"
"  .      * * *        .\n"
"      * * *** * *      \n"
" .   * * ***** * *   . \n"
"      * * *** * *   .  \n"
"   .     * * *    .    \n"
" .     .               \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";
char logo3[] = ""
" .                     \n"
"     .   .     .  .    \n"
"        .* * *.   .  . \n"
"   .  * * *** * *      \n"
" .   * * ***** * *  .  \n"
"      * * *** * * .    \n"
"    .   .* * *. .    . \n"
" .                     \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";
char logo4[] = ""
"                       \n"
"    .               .  \n"
"       ..* * *. .   .  \n"
"   .  * * *** * *      \n"
"  . .* * ***** * *.    \n"
"     .* * *** * *  .   \n"
"    .   .* * *.        \n"
"                       \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";
char logo5[] = ""
"                       \n"
"                       \n"
"      .  * * * .       \n"
"      * * *** * *      \n"
"   . * * ***** * *     \n"
"      * * *** * *.     \n"
"       . * * *  .      \n"
"                       \n"
"         .^ ^.         \n"
"      I(￣^￣)J    \n"
"          /|\\         \n"
"          /|\\         \n"
"          / \\         \n"
"         /   \\        \n";
// DragonBallLogo 对话框

IMPLEMENT_DYNAMIC(DragonBallLogo, CDialog)

DragonBallLogo::DragonBallLogo(CWnd* pParent /*=NULL*/)
	: CDialog(DragonBallLogo::IDD, pParent)
{

}

DragonBallLogo::~DragonBallLogo()
{
}

void DragonBallLogo::DoDataExchange(CDataExchange* pDX)
{
	CDialog::DoDataExchange(pDX);
}


BEGIN_MESSAGE_MAP(DragonBallLogo, CDialog)
	ON_WM_TIMER()
END_MESSAGE_MAP()

char font_list[4][30] = {
	"Courier New",
	"Terminus",
	"Consolas",
	"黑体",	
	};
int font_index = 0;

// DragonBallLogo 消息处理程序
// 穷举字体
int CALLBACK EnumFontsProc(
						   CONST LOGFONT *lplf,     // logical-font data
						   CONST TEXTMETRIC *lptm,  // physical-font data
						   DWORD dwType,            // font type
						   LPARAM lpData            // application-defined data
						   )
{
	return 1;
}

BOOL DragonBallLogo::OnInitDialog()
{
	static CFont font; //定义静态变量,也可以定义全局变量或者对话框的成员变量,临时变量或者局部变量是不行的
	int ret;
	
	CClientDC dc (this);
	int val = 0;
	
	for (int i = 0; i < sizeof(font_list) / (sizeof(char) * 30); i++ ) {
		val = ::EnumFontFamilies((HDC)dc, font_list[i], EnumFontsProc, NULL);
		if (val == 1) {
			font_index = i;
			break;
		}
	}
	//font_index = 0;
	ret = font.CreatePointFont(120, font_list[font_index]);
	GetDlgItem(IDC_STATIC)->SetFont(&font);
	SetTimer(10, 400, NULL);
	Meng(logo_lv1, logo1);
	return TRUE;
}

void DragonBallLogo::OnTimer( UINT_PTR nIDEvent  )
{
	DrawLogoAscii();
}

void DragonBallLogo::Meng(char *meng, char *pt)
{
	CEdit *hEdit;
	char buf[320*240];
	int len;

	hEdit = (CEdit *)GetDlgItem(IDC_STATIC);

	strcpy(buf, meng);
	len = strlen(pt);
	for (int i = 0; i < len; i++) {
		if (pt[i] == '.') {
			buf[i] = '.';
		}
		if (pt[i] >= '1' && pt[i] <= '9') {
			buf[i] = pt[i];
		}
	}
	
	
	hEdit->SetWindowText(buf);

}
void DragonBallLogo::DrawLogoAscii()
{
	CEdit *hEdit;

	hEdit = (CEdit *)GetDlgItem(IDC_STATIC);

	
	static int k = 0, m = 1;
	static int j = 11;
	char *pm, *pt;

	pm = logo_lv1;
	pt = logo1;

	k++;
	switch(k) {
	case 1:
		pt = logo1;
		break;
	case 2:
		pt = logo2;
		break;
	case 3:
		pt = logo3;
		break;
	case 4:
		pt = logo4;
		break;	
	case 5:
		pt = logo5;
		k = 0;
		m++;
		break;	
	}

	switch (m) {
	case 1:
		pm = logo_lv1;
		break;
	case 2:
		pm = logo_lv2;
		break;
	case 3:
		pm = logo_lv3;
		break;
	case 4:
		pm = logo_lv4;
		break;
	case 5:
		pm = logo_lv5;
		break;
	case 6:
		pm = logo_lv6;
		break;
	default:
		m = 1;
		break;
	}
	
	if (m == 6) {
		pt = pm;
		Meng(pm,pt);
		Sleep(2000);
		OnCancel();
	}
	Meng(pm,pt);
	
}

BOOL DragonBallLogo::PreTranslateMessage(MSG *pMsg)
{
	if(pMsg->message == WM_LBUTTONDOWN) {
		OnCancel();
		return 0;
	}
	return CDialog::PreTranslateMessage(pMsg);
}